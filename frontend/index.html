<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FTM - File Time Machine</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <header id="toolbar">
        <div class="toolbar-left">
          <span class="logo" data-i18n="app.title">FTM - File Time Machine</span>
          <button
            type="button"
            id="btn-help"
            class="btn-help"
            title="Help / Shortcuts"
            aria-label="Help"
            data-i18n-title="toolbar.help"
            data-i18n-aria-label="toolbar.helpAriaLabel"
          >
            ?
          </button>
          <select id="lang-select" class="lang-select">
            <option value="en" data-i18n="lang.en">EN</option>
            <option value="zh-CN" data-i18n="lang.zhCN">中文</option>
          </select>
          <div class="toolbar-stats" id="toolbar-stats" aria-hidden="true">
            <div class="toolbar-stat">
              <span class="toolbar-stat-label" data-i18n="toolbar.history">History</span>
              <div class="stats-progress-track">
                <div class="stats-progress-fill" id="stats-history-fill"></div>
              </div>
              <span class="toolbar-stat-text" id="stats-history-text">0 / 0</span>
            </div>
            <div class="toolbar-stat">
              <span class="toolbar-stat-label" data-i18n="toolbar.quota">Quota</span>
              <div class="stats-progress-track">
                <div class="stats-progress-fill" id="stats-quota-fill"></div>
              </div>
              <span class="toolbar-stat-text" id="stats-quota-text">0 B / 0 B</span>
            </div>
          </div>
        </div>
        <div class="toolbar-right">
          <label class="toolbar-checkbox"
            ><input type="checkbox" id="show-deleted" />
            <span data-i18n="toolbar.showDeleted">Show deleted files</span></label
          >
          <button
            id="btn-scan"
            title="Scan for changes"
            data-i18n="toolbar.scan"
            data-i18n-title="toolbar.scanTitle"
          >
            Scan
          </button>
          <span id="status"></span>
        </div>
      </header>

      <div id="main">
        <aside id="sidebar">
          <div id="sidebar-header">
            <div class="filter-wrap">
              <input
                id="filter"
                type="text"
                placeholder="filter files..."
                autocomplete="off"
                spellcheck="false"
                data-i18n-placeholder="sidebar.filterPlaceholder"
              />
              <button
                type="button"
                class="filter-clear"
                aria-label="Clear filter"
                title="Clear"
                data-i18n-aria-label="sidebar.clearFilter"
                data-i18n-title="sidebar.clearTitle"
              >
                ×
              </button>
            </div>
            <div
              id="tree-depth-track"
              class="tree-depth-track"
              role="slider"
              aria-valuemin="0"
              aria-valuemax="4"
              aria-valuenow="4"
              title="Tree depth: drag or click"
              data-i18n-title="sidebar.treeDepthTitle"
            >
              <div class="tree-depth-rail">
                <span
                  class="tree-depth-dot"
                  data-index="0"
                  title="Collapse all"
                  data-i18n-title="sidebar.collapseAll"
                ></span>
                <span
                  class="tree-depth-dot"
                  data-index="1"
                  title="Depth 1"
                  data-i18n-title="sidebar.depth1"
                ></span>
                <span
                  class="tree-depth-dot"
                  data-index="2"
                  title="Depth 2"
                  data-i18n-title="sidebar.depth2"
                ></span>
                <span
                  class="tree-depth-dot"
                  data-index="3"
                  title="Depth 3"
                  data-i18n-title="sidebar.depth3"
                ></span>
                <span
                  class="tree-depth-dot"
                  data-index="4"
                  title="Expand all"
                  data-i18n-title="sidebar.expandAll"
                ></span>
              </div>
              <div class="tree-depth-thumb" id="tree-depth-thumb"></div>
            </div>
          </div>
          <div id="file-list"></div>
        </aside>
        <div id="resize-handle"></div>
        <div id="content">
          <div id="diff-header">
            <span id="diff-title" data-i18n="content.selectFile"
              >Select a file to view history</span
            >
            <div id="diff-actions">
              <span id="diff-meta"></span>
              <button
                id="btn-restore"
                title="Restore selected version"
                data-i18n="content.restore"
                data-i18n-title="content.restoreTitle"
              >
                Restore
              </button>
            </div>
          </div>
          <div id="diff-viewer"></div>
        </div>
      </div>

      <div id="timeline-resize-handle"></div>
      <footer id="timeline-bar">
        <div id="timeline-toolbar">
          <div id="timeline-range-buttons">
            <button class="tl-range-btn" data-range="all" data-i18n="timeline.rangeAll">All</button>
            <button class="tl-range-btn" data-range="3600000" data-i18n="timeline.range1h">
              1h
            </button>
            <button class="tl-range-btn" data-range="21600000" data-i18n="timeline.range6h">
              6h
            </button>
            <button class="tl-range-btn" data-range="86400000" data-i18n="timeline.range1d">
              1d
            </button>
            <button class="tl-range-btn" data-range="259200000" data-i18n="timeline.range3d">
              3d
            </button>
            <button class="tl-range-btn" data-range="604800000" data-i18n="timeline.range7d">
              7d
            </button>
            <button class="tl-range-btn" data-range="2592000000" data-i18n="timeline.range30d">
              30d
            </button>
          </div>
          <div id="timeline-label"></div>
        </div>
        <div id="timeline-body">
          <div id="timeline-lanes"></div>
          <div id="timeline-lanes-resize"></div>
          <canvas id="timeline-canvas"></canvas>
        </div>
      </footer>
      <div id="timeline-tooltip"></div>

      <div id="help-overlay" class="help-overlay" aria-hidden="true">
        <div
          id="help-modal"
          class="help-modal"
          role="dialog"
          aria-labelledby="help-title"
          aria-modal="true"
        >
          <h2 id="help-title" data-i18n="help.title">Help</h2>
          <p class="help-intro" data-i18n="help.intro">
            FTM tracks file changes over time in your project. It lets you browse any file's
            history, see what changed between versions, and restore a previous version when you need
            to undo or recover.
          </p>
          <h3 class="help-section" data-i18n="help.shortcuts">Shortcuts</h3>
          <dl class="help-shortcuts">
            <dt data-i18n="help.fileList">File list</dt>
            <dd>
              <kbd>Ctrl</kbd>/<kbd>Cmd</kbd> + click —
              <span data-i18n="help.multiSelect">multi-select files</span>
            </dd>
            <dd>
              <kbd>↑</kbd> / <kbd>↓</kbd> —
              <span data-i18n="help.changeFile">change selected file</span>
            </dd>
            <dd>
              <kbd>1</kbd>–<kbd>7</kbd> —
              <span data-i18n="help.timeRange">time range (All, 1h, 6h, 1d, 3d, 7d, 30d)</span>
            </dd>
            <dd>
              <kbd>Z</kbd> —
              <span data-i18n="help.fitTimeRange"
                >fit time range to current file list (filtered)</span
              >
            </dd>
            <dt data-i18n="help.timelineMouse">Timeline (mouse over)</dt>
            <dd>
              <kbd>A</kbd> / <kbd>D</kbd> —
              <span data-i18n="help.panLR">pan left / right</span>
            </dd>
            <dd>
              <kbd>W</kbd> / <kbd>S</kbd> —
              <span data-i18n="help.zoomIO">zoom in / out</span>
            </dd>
            <dd>
              <kbd>←</kbd> / <kbd>→</kbd> —
              <span data-i18n="help.prevNext">previous / next version</span>
            </dd>
            <dd>
              <kbd>↑</kbd> / <kbd>↓</kbd> —
              <span data-i18n="help.switchLane">switch lane (multi-file)</span>
            </dd>
            <dt data-i18n="help.timelineWheel">Timeline wheel</dt>
            <dd>
              <kbd>Shift</kbd> + wheel —
              <span data-i18n="help.hPan">horizontal pan</span>
            </dd>
            <dd>
              <kbd>Ctrl</kbd>/<kbd>Cmd</kbd> + wheel —
              <span data-i18n="help.zoomAtMouse">zoom at mouse</span>
            </dd>
          </dl>
          <p class="help-close-hint" data-i18n-html="help.closeHint">
            Press <kbd>Esc</kbd> or click outside to close.
          </p>
        </div>
      </div>

      <div id="restore-overlay" class="restore-overlay" aria-hidden="true">
        <div
          id="restore-modal"
          class="restore-modal"
          role="dialog"
          aria-labelledby="restore-title"
          aria-modal="true"
        >
          <div class="restore-header">
            <h2 id="restore-title" data-i18n="restore.title">Restore Preview</h2>
            <span id="restore-filepath" class="restore-filepath"></span>
          </div>
          <div class="restore-body">
            <div class="restore-file-info" id="restore-file-info">
              <div class="restore-info-section">
                <div class="restore-info-label" data-i18n="restore.file">File</div>
                <div class="restore-info-value" id="restore-info-filename"></div>
              </div>
              <div class="restore-info-section">
                <div class="restore-info-label" data-i18n="restore.from">From</div>
                <div class="restore-info-value restore-info-checksum" id="restore-info-from"></div>
              </div>
              <div class="restore-info-section">
                <div class="restore-info-label" data-i18n="restore.to">To</div>
                <div class="restore-info-value restore-info-checksum" id="restore-info-to"></div>
              </div>
              <div class="restore-info-section" id="restore-info-stats"></div>
            </div>
            <div class="restore-panels">
              <div class="restore-panel">
                <div class="restore-panel-header" data-i18n="restore.current">Current</div>
                <div class="restore-panel-content" id="restore-panel-left"></div>
              </div>
              <div class="restore-panel">
                <div class="restore-panel-header" data-i18n="restore.after">After Restore</div>
                <div class="restore-panel-content" id="restore-panel-right"></div>
              </div>
            </div>
          </div>
          <div class="restore-footer">
            <p class="restore-close-hint" data-i18n-html="restore.closeHint">
              Press <kbd>Esc</kbd> or click outside to close.
            </p>
            <div class="restore-footer-buttons">
              <button
                type="button"
                id="restore-cancel"
                class="restore-btn restore-btn-cancel"
                data-i18n="restore.cancel"
              >
                Cancel
              </button>
              <button
                type="button"
                id="restore-confirm"
                class="restore-btn restore-btn-confirm"
                data-i18n="restore.confirm"
              >
                Confirm Restore
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="i18n.js"></script>
    <script src="app.js"></script>
  </body>
</html>
